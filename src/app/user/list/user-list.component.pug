.user-list-wrapper
  md-tab-group
    md-tab(label='List')
      .user-cards
        md-card.user-card(*ngFor='let user of users | orderBy: "+username"')
          table
            tr
              th Username
              td
                md-input-container
                  input(mdInput, [(ngModel)]='user.username', [disabled]='!isEditingUser(user)')
            tr
              th Name
              td
                md-input-container
                  input(mdInput, [(ngModel)]='user.name', [disabled]='!isEditingUser(user)')
            tr
              th Email
              td
                md-input-container
                  input(mdInput, type='email', [(ngModel)]='user.email', [disabled]='!isEditingUser(user)')
            tr
              th Phone
              td
                phone-widget([number]='user.phone', [edit]='isEditingUser(user)')
            tr
              th Role
              td
                md-input-container
                  input(mdInput, [(ngModel)]='user.role', [disabled]='!isEditingUser(user)')
            tr
              th Privilege Level
              td(*ngIf='!isEditingUser(user)') {{prettyLevelName(user.level)}}
              td(*ngIf='isEditingUser(user)')
                md-select([(ngModel)]='user.level')
                  md-option(*ngFor='let enum of privilegesEnum | keys',
                    [value]='getLevelValue(enum)',
                    [disabled]='isLevelDisabled(enum)')
                    | {{prettyLevelName(enum.key)}}
          md-card-actions
            button(md-button, [disabled]='!canModify(user)', (click)='deleteUser(user.username)') Delete
            |  
            button(md-button, [disabled]='!canModify(user)', (click)='editUser(user)', *ngIf='!isEditingUser(user)') Edit
            |  
            button(md-button, [disabled]='!canModify(user)', (click)='saveUser()', *ngIf='isEditingUser(user)') Save
            |  
            button(md-button, [disabled]='!canModify(user)', (click)='stopEditingUser()', *ngIf='isEditingUser(user)') Cancel
            |  
            button(md-button, [disabled]='!canModify(user)', (click)='resetPassword(user)') Reset Password
    md-tab(label='Add')
      .register-wrapper
        md-card.register-card
          md-card-title  Create new
          md-card-content
            form.form([formGroup]='form', (ngSubmit)='onSubmit()', #registerForm='ngForm')
              table
                tr
                  th Username
                  td
                    md-input-container
                      input(mdInput, formControlName='username')
                tr
                  th Name
                  td
                    md-input-container
                      input(mdInput, formControlName='name')
                tr
                  th Email
                  td
                    md-input-container
                      input(mdInput, type='email', formControlName='email')
                tr
                  th Phone
                  td
                    phone-widget
                tr
                  th Role
                  td
                    md-input-container
                      input(mdInput, formControlName='role')
                button(md-raised-button, color='primary', type='submit') Register
            table
              tr
                th Privilege Level
                td
                  md-select([(ngModel)]='selectedLevel')
                      md-option(*ngFor='let enum of privilegesEnum | keys',
                        [value]='getLevelValue(enum)',
                        [disabled]='isLevelDisabled(enum)')
                        | {{prettyLevelName(enum.key)}}
    md-tab(label='Add from CSV')
      .bulk-register-wrapper
        md-card.bulk-register-card
          md-card-title Bulk registration
          md-card-content
            h3 Import
            input(type='file', (change)='bulkRegisterFileEvent($event)')
            table(*ngIf='bulkUsers')
              thead
                tr
                  th Username
                  th Name
                  th Email
                  th Phone
                  th Role
                  th Privilege Level
                  th Create?
              tbody
                tr(*ngFor='let user of bulkUsers') 
                  td {{user.username}}
                  td {{user.name}}
                  td {{user.email}}
                  td
                    phone-widget([number]='user.phone')
                  td {{user.role}}
                  td
                    md-select([(ngModel)]='user.level')
                      md-option(*ngFor='let enum of privilegesEnum | keys',
                        [value]='getLevelValue(enum)',
                        [disabled]='isLevelDisabled(enum)')
                        | {{prettyLevelName(enum.key)}}
                  td
                    button(md-raised-button, color='primary', (click)='createUser(user)', [disabled]='usernameExists(user.username)') Create
