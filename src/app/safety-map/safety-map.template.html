<div class='safety-map-container'>
  <sebm-google-map
    [latitude]='default.lat'
    [longitude]='default.lng'
    [zoom]='default.zoom'>
    <sebm-google-map-marker
      [latitude]="hostel.lat"
      [longitude]="hostel.lng"
      [iconUrl]='hostel.iconUrl'>
    </sebm-google-map-marker>
    <sebm-google-map-marker *ngFor='let team of teams | teamHasUpdate '
      [latitude]='(team.getLastUpdate().location.latitude)'
      [longitude]='(team.getLastUpdate().location.longitude)'
      [title]='team.name'>
      <sebm-google-map-info-window>
        <table>
          <tr>
            <th>Team name:</th>
            <td>
              {{team.name}}
            </td>
          </tr>
          <tr>
            <th>Racers:</th>
            <td>
              {{team.getPrettyRacersList()}}
            </td>
          </tr>
          <tr>
            <th>Current place:</th>
            <td>
              {{team.getLastUpdate().location.place}}
            </td>
          </tr>
        </table>
      </sebm-google-map-info-window>
    </sebm-google-map-marker>
  </sebm-google-map>
  <md-card class='safety-map-guide'>
    <md-card-title>
      Safety map
    </md-card-title>
    <md-card-content>
      <table>
        <thead>
          <tr>
            <th>Team</th>
            <th><md-icon>place</md-icon></th>
            <th>Last update</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor='let team of teams | teamHasUpdate'>
            <td>{{team.name}}</td>
            <td>
              <button md-icon-button (click)='highlightTeam(team)'>
                <md-icon>place</md-icon>
              </button>
            </td>
            <td><time-widget [fromNow]='true'[time]='team.getLastUpdate().timestamp'></time-widget></td>
            <td>{{team.getLastUpdate().prettyStatusName()}}</td>
          </tr>
        </tbody>
      </table>
    </md-card-content>
  </md-card>
</div>
